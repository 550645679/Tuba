<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tuba API | Daily</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/default-style.css">
    <link rel="stylesheet" href="css/other-style.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="js/jquery-3.3.1.js" charset="utf-8"></script>
    <script src="js/bootstrap.js" charset="utf-8"></script>
    <script src="js/popper.js" charset="utf-8"></script>
    <script>
        function time() {
            var now = new Date();
            var year = now.getFullYear();
            var month = now.getMonth();
            var date = now.getDate();
            // Get now day
            if (month+1 < 10) {
                month = "0" + (month+1);
            }
            if (date < 10) {
                date = "0" + date;
            }
            // Fix date
            var file = "files/" + year + month + date + ".jpg";
            // Lock file local
            document.getElementById("time").innerHTML = "日期：" + year + "年" + month + "月" + date + "日";
            // Write old day date
            if ((year+month+date) < "20190128") {
                document.getElementById("tips").innerHTML = "Tips:小编偷懒了，今天没有日推哦~";
                document.getElementById("down").className = "btn btn-primary disabled";
            } else {
                document.getElementById("daily").src = file;
                document.getElementById("down").href = file;
            }
            // Write infomation form website
        }
            // png & jpg & NotPicture 智能识别模块(弃用中)
            // var fileURL = "files/" + year + month + date;
            // var xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            // xmlhttp.open("GET",fileURL + ".jpg",false);
            // xmlhttp.send(ture);
            // if (xmlhttp.readyState==4) {
            //     if (xmlhttp.status==200) {
            //         document.getElementById("img").src = fileURL + ".jpg";
            //     } else {
            //         document.getElementById("img").src = fileURL + ".png";
            //     }
            // }
    </script>
</head>
<body class="text-center" onload="time()">
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="masthead mb-auto">
            <div class="inner">
                <h3 class="masthead-brand">Tuba API</h3>
                <nav class="nav nav-masthead justify-content-center">
                    <a class="nav-link" href="index.html">首页</a>
                    <a class="nav-link active" href="#">日推</a>
                    <a class="nav-link" href="history.html">历史</a>
                    <a class="nav-link" href="more.html">更多</a>
                    <a class="nav-link" href="#">社区</a>
                </nav>
            </div>
        </header>
        <main role="main" class="inner cover">
            <div class="card mc tc sma cd">
                <div class="card-body">
                    <h1 class="cover-heading">今日推荐</h1>
                    <p id="time" class="lead"></p>
                    <p class="lead" id="tips" style="font-size:16px;">Tips:稍安勿躁，图片加载完成需要等待3-5秒的时间哦~</p>
                    <img src="images/loading.png" id="daily" class="rounded img-fluid">
                    <div>
                        <a class="btn btn-primary" target="_blank" id="down" href="#">View</a>
                    </div>
                </div>
            </div>
        </main>
        <footer class="mastfoot mt-auto">
            <div class="inner">
                <p>Powered by <a href="http://www.echocode.club/">EchoCode</a> , Based on <a href="https://getbootstrap.com/">Bootstrap</a></p>
            </div>
        </footer>
    </div>
</body>
</html>